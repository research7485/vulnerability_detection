import csv 

fieldnames = []
data_codebert = []

# bad
with open('bigvul_T3_1.csv', 'r') as f:
    writer = csv.DictReader(f)
    fieldnames = writer.fieldnames
    for row in writer:
        data_codebert.append(row)
        
# good
data_sbert = []
with open('codebert_big_vul_relation_with_T3.csv', 'r') as f:
    writer = csv.DictReader(f)
    for row in writer:
        data_sbert.append(row)
        
print(len(data_codebert))
print(len(data_sbert))

count = 0
with open('fixed/bigvul_T3_1.csv', 'w') as f:
    writer = csv.DictWriter(f, fieldnames=fieldnames)
    writer.writeheader()
    for record in data_codebert:
        
        # Check if the record was in sbert file or not
        found = False
        for dic in data_sbert:
            if record['Index'] == dic['Index']:
                found = True
                break
            
        if found:
            count += 1
            writer.writerow(record) 
            
print(count)